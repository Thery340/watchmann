<div class="offre-background">
  <img src="assets/wavehome.png" alt="Décor wavehome" class="decor-wavehome" />
  <img src="assets/wavehome2.png" alt="Décor wavehome2" class="decor-wavehome2" />
  <img src="assets/wavehomemobile.png" alt="Décor mobile" class="decor-mobile" />
</div>
<div class="offre-content">
  <div class="offre-title-group">
    <h1 class="offre-title">Votre établissement. Vos objectifs</h1>
    <p class="offre-subtitle">
      Un tarif simple, annuel ou trimestriel sans surprise.<br />
      Une solution évolutive qui s’adapte à votre réalité terrain.
    </p>
  </div>
</div>
<div class="offre-cards">
  <!-- Formule Standard -->
  <details
    class="offre-card"
    [attr.open]="!isMobile ? '' : null"
    [attr.disabled]="!isMobile ? true : null"
    [class.static]="!isMobile"
  >
    <summary class="offre-card-header">
      <img src="assets/stars.png" alt="Icône Standard" />
      <h3>Formule Standard</h3>
    </summary>
    <div class="offre-card-content">
      <p class="offre-price">450€ / an</p>
      <ul>
        <li>10 QR Codes à générer et imprimer</li>
        <li>Rondes illimitées</li>
        <li>2 Rondiers</li>
        <li>6 Tâches</li>
        <li>Support de mise en place de la solution</li>
      </ul>
      <button class="offre-btn" (click)="openPopup('Formule Standard'); $event.stopPropagation()">
        Obtenir mon offre
      </button>
    </div>
  </details>

  <!-- Formule Avancée -->
  <details class="offre-card" [attr.open]="!isMobile ? '' : null">
    <summary class="offre-card-header">
      <img src="assets/flamme.png" alt="Icône Avancée" />
      <h3>Formule Avancée</h3>
    </summary>
    <div class="offre-card-content">
      <p class="offre-price">800€ / an</p>
      <ul>
        <li>14 QR Codes sur support bois ou inox</li>
        <li><strong>Mise en place et Création des comptes</strong></li>
        <li>Smartphone Android</li>
        <li>Rondes illimitées</li>
        <li>5 Rondiers</li>
        <li>8 Tâches</li>
      </ul>
      <button class="offre-btn" (click)="openPopup('Formule Avancée'); $event.stopPropagation()">
        Obtenir mon offre
      </button>
    </div>
  </details>

  <!-- Formule Premium -->
  <details class="offre-card" [attr.open]="!isMobile ? '' : null">
    <summary class="offre-card-header">
      <img src="assets/sutecase.png" alt="Icône Premium" />
      <h3>Formule Premium</h3>
    </summary>
    <div class="offre-card-content">
      <p class="offre-price">1200€ / an</p>
      <ul>
        <li>20 QR Codes sur support bois ou inox</li>
        <li><strong>Smartphone Android</strong></li>
        <li><strong>Mise en place et Création des comptes</strong></li>
        <li>Étude d'un circuit de ronde optimal par un professionnel</li>
        <li>Rondes illimitées</li>
        <li>Tâches illimitées</li>
      </ul>
      <button class="offre-btn" (click)="openPopup('Formule Premium'); $event.stopPropagation()">
        Obtenir mon offre
      </button>
    </div>
  </details>

  <!-- POPUP -->
  <div class="popup-backdrop" *ngIf="showPopup" (click)="closePopup()"></div>
  <div class="popup-form" *ngIf="showPopup">
    <form (submit)="sendForm($event)">
      <h2>
        Demander l’offre <span>{{ selectedOffreName }}</span>
      </h2>

      <label>
        Nom <span class="star">*</span> :
        <input type="text" name="name" [(ngModel)]="contactForm.name" required />
      </label>
      <label>
        Nom de l'entreprise <span class="star">*</span> :
        <input type="text" name="company" [(ngModel)]="contactForm.company" required />
      </label>
      <label>
        Email <span class="star">*</span> :
        <input type="email" name="email" [(ngModel)]="contactForm.email" required />
      </label>
      <label>
        Offre choisie :
        <input type="text" name="offre" [value]="selectedOffreName" readonly />
      </label>
      <label>
        Message <span class="star">*</span> :
        <textarea name="message" [(ngModel)]="contactForm.message" required></textarea>
      </label>

      <div class="popup-actions">
        <button type="submit" class="btn-main">Envoyer</button>
        <button type="button" (click)="closePopup()" class="btn-cancel">Annuler</button>
      </div>
      <div class="form-required-info"><span class="star">*</span> Champs obligatoires</div>
      <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    </form>
  </div>
</div>
